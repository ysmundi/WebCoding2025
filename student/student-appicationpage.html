<!DOCTYPE html><!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Wed Feb 26 2025 15:50:37 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="679fd888f74ee0cee34b5a97" data-wf-site="676715cb815e8f01731dca22">
<head>
  <meta charset="utf-8">
  <title>Student_AppicationPage</title>
  <meta content="Student_AppicationPage" property="og:title">
  <meta content="Student_AppicationPage" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../css/yuvraj-webcoding-24-25.webflow.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../images/Group-102.png" rel="shortcut icon" type="image/x-icon">
  <link href="../images/Group-102.png" rel="apple-touch-icon">
  <script src="../js/config.js"></script>
</head>
<body>
  <div class="pop-up">
    <div class="pop-up-item">
      <div class="w-layout-blockcontainer container-222 w-container">
        <h1 class="heading-80">SUCCESS</h1>
      </div>
      <div class="w-layout-blockcontainer container-223 w-container">
        <div class="w-layout-blockcontainer container-225 w-container">
          <h1 class="heading-77">You have successfully applied for a project. Now, you can check for itâ€™s approval status in your Dashboard!</h1>
        </div>
      </div>
      <a href="student-home.html#Dashboard" class="link-block-14 w-inline-block">
        <div class="w-layout-blockcontainer container-335 w-container">
          <h1 class="heading-79">BACK TO DASHBOARD</h1>
        </div>
      </a>
    </div>
  </div>
  <div class="w-layout-blockcontainer container-116 w-container">
    <div class="w-layout-blockcontainer container-149 w-container">
      <div class="w-layout-blockcontainer container-164 w-container">
        <a href="javascript:history.back()"><div class="text-block-25">BACK</div></a>
      </div>
    </div>
    <h1 class="heading-21">APPLY</h1>
    <div class="w-layout-blockcontainer container-150 w-container"></div>
  </div>
  <section class="section-27">
    <div class="w-layout-blockcontainer container-151 w-container">
      <div class="w-layout-blockcontainer container-154 w-container">
        <h1 class="heading-48">Basic Information</h1>
        <div class="text-block-114" id="organization_name">University of Harvard</div>
        <h1 class="heading-29" id="position_name"><span class="text-span-7">LECTURER</span></h1>
        <div class="text-block-111" id="education_requirements">Master Degree in Theoretical Physics</div>
        <div class="w-layout-blockcontainer container-155 w-container">
          <div class="w-layout-blockcontainer container-159 w-container">
            <div class="text-block-26">Position Type</div>
          </div>
          <div class="w-layout-blockcontainer container-160 w-container">
            <div class="text-block-27" id="position_type">On Site</div>
          </div>
        </div>
        <div class="w-layout-blockcontainer container-156 w-container">
          <div class="w-layout-blockcontainer container-161 w-container">
            <div class="text-block-113">Location</div>
          </div>
          <div class="w-layout-blockcontainer container-162 w-container">
            <div class="text-block-28" id="location"><strong>Cambridge, MA</strong></div>
          </div>
        </div>
        <div class="w-layout-blockcontainer container-156 w-container">
          <div class="w-layout-blockcontainer container-161 w-container">
            <div class="text-block-112">Salary</div>
          </div>
          <div class="w-layout-blockcontainer container-162 w-container">
            <div><strong class="bold-text-6" id="salary">$110,000/Year</strong></div>
          </div>
        </div>
        <div class="w-layout-blockcontainer container-156 w-container">
          <div class="w-layout-blockcontainer container-161 w-container">
            <div class="text-block-110">Deadline</div>
          </div>
          <div class="w-layout-blockcontainer container-162 w-container">
            <div><strong class="bold-text-7" id="deadline">2024 - 2029</strong></div>
          </div>
        </div>
        <h1 class="heading-87">Requirements</h1>
        <p class="paragraph-25" id="requirements">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
        <h1 class="heading-88">About</h1>
        <p class="paragraph-26" id="about">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros </p>
      </div>
      <div class="w-layout-blockcontainer container-152 w-container">
        <div class="form-block-6 w-form">
          <form id="email-form" name="email-form" data-name="Email Form" method="get" class="form-6" data-wf-page-id="679fd888f74ee0cee34b5a97" data-wf-element-id="fda40e31-69b4-664b-04f9-48c1abaab59a">
            <h1 class="heading-89">Apply</h1><label for="name" class="field-label-28">Name</label><input class="text-field-17 w-input" maxlength="256" name="name" data-name="Name" placeholder="" type="text" id="name" required=""><label for="email" class="field-label-27">Email Address</label><input class="text-field-18 w-input" maxlength="256" name="email" data-name="Email" placeholder="" type="email" id="email" required=""><label for="email-2" class="field-label-25">Phone Number(Optional)</label><input class="text-field-18 w-input" maxlength="256" name="email-2" data-name="Email 2" placeholder="" type="tel" id="phone-number" ><label for="field" class="field-label-26">About You</label><textarea required="" placeholder="Example Text" maxlength="5000" id="about-you" name="field" data-name="Field" class="textarea-2 w-input"></textarea>
            <div class="w-layout-blockcontainer container-163 w-container"><input type="submit" data-wait="Please wait..." data-w-id="fda40e31-69b4-664b-04f9-48c1abaab5a1" class="submit-button-6 w-button" value="Submit"></div>
          </form>
          <div class="w-form-done">
            <div>Thank you! Your submission has been received!</div>
          </div>
          <div class="w-form-fail">
            <div>Oops! Something went wrong while submitting the form.</div>
          </div>
        </div>
        <h1 class="heading-88">Nice To Have</h1>
        <p class="paragraph-27" id="nice-to-have">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
        <h1 class="heading-88">Why work with us?</h1>
        <p class="paragraph-28" id="why-work-with-us">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
      </div>
    </div>
    <div class="w-layout-blockcontainer container-290 w-container">
      <div class="w-layout-blockcontainer container-154 w-container">
        <h1 class="heading-48">Basic Information</h1>
        <div>University of Harvard</div>
        <h1 class="heading-29"><span class="text-span-7">LECTURER</span></h1>
        <div>Master Degree in Theoretical Physics</div>
        <div class="w-layout-blockcontainer container-155 w-container">
          <div class="w-layout-blockcontainer container-159 w-container">
            <div class="text-block-26">Position Type</div>
          </div>
          <div class="w-layout-blockcontainer container-160 w-container">
            <div class="text-block-27">On Site</div>
          </div>
        </div>
        <div class="w-layout-blockcontainer container-156 w-container">
          <div class="w-layout-blockcontainer container-161 w-container">
            <div>Location</div>
          </div>
          <div class="w-layout-blockcontainer container-162 w-container">
            <div class="text-block-28"><strong>Cambridge, MA</strong></div>
          </div>
        </div>
        <div class="w-layout-blockcontainer container-156 w-container">
          <div class="w-layout-blockcontainer container-161 w-container">
            <div>Salary</div>
          </div>
          <div class="w-layout-blockcontainer container-162 w-container">
            <div><strong class="bold-text-6">$110,000/Year</strong></div>
          </div>
        </div>
        <div class="w-layout-blockcontainer container-156 w-container">
          <div class="w-layout-blockcontainer container-161 w-container">
            <div>Duration of Contract</div>
          </div>
          <div class="w-layout-blockcontainer container-162 w-container">
            <div><strong class="bold-text-7">2024 - 2029</strong></div>
          </div>
        </div>
        <h1 class="heading-62">Requirements</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
        <h1 class="heading-63">About</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros </p>
      </div>
      <div class="w-layout-blockcontainer container-152 w-container">
        <h1 class="heading-64">Nice To Have</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
        <h1 class="heading-65">Why work with us?</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
        <div class="form-block-6 w-form">
          <form id="email-form" name="email-form" data-name="Email Form" method="get" class="form-6" data-wf-page-id="679fd888f74ee0cee34b5a97" data-wf-element-id="0fae71cb-15cb-003a-1553-db07a998ebcb">
            <h1>Apply</h1><label for="name-2">Name</label><input class="text-field-17 w-input" maxlength="256" name="name-2" data-name="Name 2" placeholder="" type="text" id="name-2" required=""><label for="email-3">Email Address</label><input class="text-field-18 w-input" maxlength="256" name="email-3" data-name="Email 3" placeholder="" type="email" id="email-3" required=""><label for="email-3">Phone Number(Optional)</label><input class="text-field-18 w-input" maxlength="256" name="email-2" data-name="Email 2" placeholder="" type="tel" id="email-2" required=""><label for="field-2">About You</label><textarea required="" placeholder="Example Text" maxlength="5000" id="field-2" name="field-2" data-name="Field 2" class="textarea-2 w-input"></textarea>
            <div class="w-layout-blockcontainer container-163 w-container"><input type="submit" data-wait="Please wait..." data-w-id="0fae71cb-15cb-003a-1553-db07a998ebdf" class="submit-button-6 w-button" value="Submit"></div>
          </form>
        </div>
      </div>
    </div>
    <div class="w-layout-blockcontainer container-153 w-container">
      <h1 class="heading-88">Responsibilities</h1>
      <p class="paragraph-29" id="responsibilities">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=676715cb815e8f01731dca22" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../js/webflow.js" type="text/javascript"></script>

  <script>
    let userId; // Declare userId globally

    // Function to extract query parameters from the URL
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // Function to check if a session ID exists
    function checkSession() {
        return $.ajax({
            url: `${config.apiBaseUrl}/auth/api/user`,
            method: 'GET',
            credentials: 'include', // Include cookies
            success: function (data) {
                if (!data.user || !data.user.id || data.user.role !== "Student") {
                    // Redirect to index.html if no session ID is found or the user is a recruiter
                    window.location.href = '../index.html';
                }
                userId = data.user.id; // Store the user ID
            },
            error: function (error) {
                // Redirect to index.html if there's an error (e.g., no session)
                window.location.href = '../index.html';
                console.error('Error fetching user ID:', error);
            },
        });
    }

    // Function to fetch data from the API
    async function fetchJobDetails() {
        const jobId = getQueryParam('jobId'); // Get the job ID from the URL

        if (!jobId) {
            console.error('Job ID not found in the URL');
            return;
        }

        try {
            const response = await fetch(`${config.apiBaseUrl}/recruiter/posting-info/${jobId}`); // Use the job ID in the API URL
            if (!response.ok) {
                throw new Error('Failed to fetch data');
            }
            const data = await response.json(); // Parse the JSON response

            // Log the API response for debugging
            console.log('API Response:', data);

            // Check if the response is an array and has at least one element
            if (Array.isArray(data) && data.length > 0) {
                const job = data[0]; // Access the first job in the array

                // Log the job object for debugging
                console.log('Job Object:', job);

                // Update the HTML with the fetched data
                document.getElementById('organization_name').textContent = job.organization_name || 'None.';
                document.getElementById('position_name').textContent = job.position_name || 'None.';
                document.getElementById('position_type').textContent = job.job_type || 'None.';
                document.getElementById('education_requirements').textContent = job.education_requirements || 'None.';
                document.getElementById('location').textContent = job.location_requirements || 'None.';
                document.getElementById('salary').textContent = job.salary ? `$${job.salary}/Hour` : 'None';
                document.getElementById('deadline').textContent = job.deadline ? new Date(job.deadline).toLocaleDateString() : 'None.';
                document.getElementById('requirements').textContent = job.requirements || 'No requirements available.';
                document.getElementById('responsibilities').textContent = job.responsibilities || 'No responsibilities available.';
                document.getElementById('about').textContent = job.about || 'No about information available.';
                document.getElementById('nice-to-have').textContent = job.nice_to_have || 'No nice-to-have information available.';
                document.getElementById('why-work-with-us').textContent = job.why_work_with_us || 'No information available.';
            } else {
                throw new Error('No job data found in the response');
            }
        } catch (error) {
            console.error('Error fetching job details:', error);
            document.getElementById('error-message').textContent = 'Failed to fetch job details.';
        }
    }

    // Call the function when the page loads
    document.addEventListener('DOMContentLoaded', function () {
        checkSession().then(fetchJobDetails).catch(() => {
            // Redirect to index.html if the session check fails
            window.location.href = '../index.html';
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        document.getElementById("email-form").addEventListener("submit", async function(event) {
            event.preventDefault();

            // Ensure userId is available
            if (!userId) {
                console.error("User ID is not available.");
                alert("User session is invalid. Please log in again.");
                return;
            }

            // Get form values
            const job_id = parseInt(getQueryParam('jobId'), 10);
            const username = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const phone_number = document.getElementById("phone-number").value;
            const about_you = document.getElementById("about-you").value;

            // Prepare API request body
            const data = {
                job_id,
                user_id: userId, // Use the userId variable here
                username,
                email,
                phone_number,
                about_you
            };

            // Send API request
            try {
                const response = await fetch(`${config.apiBaseUrl}/student/apply`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(data),
                });

                if (response.ok) {
                    document.querySelector(".w-form-done").style.display = "block"; // Show success message
                    document.querySelector(".w-form-fail").style.display = "none";  // Hide error message
                    document.getElementById("email-form").reset(); // Reset form
                } else {
                    console.error("Failed to submit the job", response.statusText);
                    throw new Error("Form submission failed");
                }
            } catch (error) {
                document.querySelector(".w-form-done").style.display = "none"; // Hide success message
                document.querySelector(".w-form-fail").style.display = "block"; // Show error message
                console.error("Error submitting form:", error);
            }
        });
    });
</script>
</body>
</html>