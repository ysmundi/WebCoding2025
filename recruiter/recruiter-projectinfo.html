<!DOCTYPE html><!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Fri Feb 14 2025 17:28:08 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="67a9200ff24e68c0ebd10562" data-wf-site="676715cb815e8f01731dca22">
<head>
  <script src="../lib/jquery/jquery-3.7.1.min.js"></script>
  <meta charset="utf-8">
  <title>Recruiter_ProjectInfo</title>
  <meta content="Recruiter_ProjectInfo" property="og:title">
  <meta content="Recruiter_ProjectInfo" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../css/yuvraj-webcoding-24-25.webflow.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="../images/webclip.png" rel="apple-touch-icon">

  <!-- Webflow Stuff -->
  <!--    <link href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">-->
  <link href="../lib/datatables/dataTables.css" rel="stylesheet">
  <!--    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>-->
  <!--    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>-->
  <script src="../lib/jquery/jquery.dataTables.min.js"></script>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
    }

    /* Set the background color for the entire table */
    table.dataTable {
      width: 100%;
      border-collapse: collapse;
      font-family: Arial, sans-serif;
    }

    /* Header row styling */
    table.dataTable thead th {
      background-color: #64AAC3; /* Blue background for header */
      color: white; /* White text for header */
      padding: 10px;
      text-align: left; /* Center-align text */
      font-size: 24px; /* Larger font size for header text */
      height: 10vh; /* Set header height to 25% of the viewport height */
      vertical-align: middle; /* Center align text vertically */
    }

    /* Alternating row colors */
    table.dataTable tbody tr:nth-child(odd) {
      background-color: white; /* White for odd rows */
    }

    table.dataTable tbody tr:nth-child(even) {
      background-color: #64AAC3; /* Light blue for even rows */
    }

    /* Table cell styling */
    table.dataTable tbody td {
      padding: 12px;
      font-size: 18px; /* Increased font size */
      vertical-align: middle;
    }

    /*!* Hover effect *!*/
    /*table.dataTable tbody tr:hover {*/
    /*  background-color: #B3E5FC; !* Slightly darker blue on hover *!*/
    /*}*/

    /* Set the first row height to 10vh */
    table.dataTable tbody tr:first-child td {
      height: 30vh;
    }

    /* Set the height of all other rows to 30vh */
    table.dataTable tbody tr:not(:first-child) td {
      height: 30vh;
    }

    /* Set the width of the columns */
    table.dataTable thead th:first-child,
    table.dataTable tbody td:first-child {
      width: 30vw; /* 30% of the viewport width */
    }

    table.dataTable thead th:nth-child(2),
    table.dataTable tbody td:nth-child(2) {
      width: 30vw; /* 30% of the viewport width */
    }

    table.dataTable thead th:last-child,
    table.dataTable tbody td:last-child {
      width: 10vw; /* 10% of the viewport width */
    }

    /* Increase the size of the edit button */
    .datatable-controls {
      display: flex;
      justify-content: flex-end; /* Align items to the right */
      align-items: center; /* Keep vertical alignment */
      width: 100%; /* Ensure the container spans the full width of the screen */
      box-sizing: border-box; /* Include padding in width calculations */
    }

    .datatable-controls label:last-child {
      margin-left: auto; /* Push the search bar to the far right */
    }

    .datatable-controls input[type="text"] {
      text-align: left; /* Optional: Keeps text inside the search bar aligned to the left */
    }

    /* Make the table container scrollable */
    .table-container {
      height: 50vh; /* Set the height of the scrollable area */
      overflow-y: auto; /* Enable vertical scrolling */
      overflow-x: hidden; /* Prevent horizontal scrolling */
    }

    /* Optional: Style adjustments for the table */
    table.dataTable {
      background-color: #ffffff;
      color: black;
    }

    .vertical-buttons {
      height: 100%; /* Fill the entire height of the parent cell */
      display: flex; /* Use flexbox for alignment */
      flex-direction: column; /* Stack buttons vertically */
      justify-content: space-around; /* Space buttons evenly */
      align-items: center; /* Center buttons horizontally */
    }

    /* Style for the Info button */
    .edit-btn.accept {
      background-color: #64AAC3; /* Blue background */
      color: white; /* Default white text */
      border: 1px solid black; /* Black border */
      padding: 0; /* Remove padding to rely on width and height */
      font-size: 20px; /* Font size */
      border-radius: 5px; /* Rounded corners */
      cursor: pointer; /* Pointer cursor */
      width: 90%; /* Adjust width as needed */
      height: 30%;/* Set height to 20% of the cell */
      align-items: center; /* Vertically center the text */
      margin: auto; /* Center the button within the cell */
      text-align: center; /* Center-align text (fallback) */
      position: relative; /* Set the button as the positioning context for the dot */
      display: inline-flex; /* Keep the button's content aligned */
      justify-content: center; /* Center content horizontally */
      overflow: visible; /* Ensure the dot isn't clipped */
    }

    /* Style for the Suspend button */
    .edit-btn.suspend {
      background-color: #C03C29; /* Blue background */
      color: white; /* Default white text */
      border: 1px solid black; /* Black border */
      padding: 0; /* Remove padding to rely on width and height */
      font-size: 20px; /* Font size */
      border-radius: 5px; /* Rounded corners */
      cursor: pointer; /* Pointer cursor */
      width: 90%; /* Adjust width as needed */
      height: 30%;/* Set height to 20% of the cell */
      align-items: center; /* Vertically center the text */
      margin: auto; /* Center the button within the cell */
      text-align: center; /* Center-align text (fallback) */
      position: relative; /* Set the button as the positioning context for the dot */
      display: inline-flex; /* Keep the button's content aligned */
      justify-content: center; /* Center content horizontally */
      overflow: visible; /* Ensure the dot isn't clipped */
    }


    /* Change Info button to white in blue columns */
    table.dataTable tbody tr:nth-child(even) .edit-btn.accept {
      background-color: white; /* White background for the button */
      color: #64AAC3; /* Black text for contrast */
    }

    .edit-btn.info {
      background-color: #727070; /* Blue background */
      color: white; /* Default white text */
      border: 1px solid black; /* Black border */
      padding: 0; /* Remove padding to rely on width and height */
      font-size: 20px; /* Font size */
      border-radius: 5px; /* Rounded corners */
      cursor: pointer; /* Pointer cursor */
      width: 90%; /* Adjust width as needed */
      height: 30%; /* Set ight to 20% of the cell */
      display: flex; /* Use flexbox for alignment */
      justify-content: center; /* Horizontally center the text */
      align-items: center; /* Vertically center the text */
      margin: auto; /* Center the button within the cell */
      text-align: center; /* Center-align text (fallback) */
    }

    /* Add "Apply Data" heading above Date column text */
    table.dataTable tbody td.date-column {
      position: relative;
      padding-top: 20px; /* Add space for the heading */
    }

    /* First table: Display "Date Joined" in the date-column */
    #tableDateJoined tbody td.date-column::before {
      content: "Date Joined"; /* Display "Date Joined" */
      position: absolute;
      top: 50px;
      left: 10px;
      font-size: 25px; /* Font size for the text */
      font-weight: bold; /* Bold text */
      color: black; /* Default black color for white rows */
    }

    /* Make the "Date Joined" text white in blue rows (even rows) */
    #tableDateJoined tbody tr:nth-child(even) td.date-column::before {
      color: white; /* White text for blue rows */
    }

    /* Second table: Keep "Submitted" in the date-column */
    #tableSubmitted tbody td.date-column::before {
      content: "Submitted"; /* Display "Submitted" */
      position: absolute;
      top: 50px;
      left: 10px;
      font-size: 25px; /* Font size for the text */
      font-weight: bold; /* Bold text */
      color: black; /* Default black color for white rows */
    }

    /* Make the "Submitted" text white in blue rows (even rows) */
    #tableSubmitted tbody tr:nth-child(even) td.date-column::before {
      color: white; /* White text for blue rows */
    }


    /* Remove hover effect but maintain the original row colors */

    /* For odd rows (white background) */
    table.dataTable tbody tr:nth-child(odd):hover {
      background-color: white !important; /* Explicitly set white for odd rows */
    }

    /* For even rows (blue background) */
    table.dataTable tbody tr:nth-child(even):hover {
      background-color: #64AAC3 !important; /* Explicitly set blue for even rows */
    }

    /* Increase the font size of the Name column */
    table.dataTable tbody td.name-column {
      font-size: 60px; /* Larger font size */
      font-weight: bold; /* Make it bold */
    }

    table.dataTable tbody tr:nth-child(even) td.name-column,
    table.dataTable tbody tr:nth-child(even) td.date-column {
      color: white; /* White text for names and dates in blue rows */
    }

    table.dataTable tbody tr:nth-child(odd) td.name-column,
    table.dataTable tbody tr:nth-child(odd) td.date-column {
      color: black; /* Black text for names and dates in white rows */
    }

    /* Add a border to the entire table */
    table.dataTable {
      border: 2px solid #000; /* Black border around the table */
      border-collapse: separate; /* Prevents collapsing borders between columns */
      border-spacing: 0; /* Ensures no space between cells */
    }

    /* Remove borders between columns */
    table.dataTable td,
    table.dataTable th {
      border: none; /* No borders between columns */
    }

    /* Optional: Add borders to rows for better structure */
    table.dataTable tbody tr {
      border-bottom: 1px solid #ccc; /* Light gray border between rows */
    }

    /* Style for the notification dot */
    .notification-dot {
      position: absolute; /* Position relative to the button */
      top: -5px; /* Adjust the position to the top-right corner */
      right: -5px; /* Adjust the position to the top-right corner */
      width: 15px; /* Diameter of the dot */
      height: 15px; /* Diameter of the dot */
      background-color: #C03C29; /* Red color for the dot */
      border-radius: 50%; /* Make it circular */
      z-index: 1; /* Ensure it appears above the button */
    }

    .text-block-45 a {
      text-decoration: none; /* Removes the underline */
    }

    /* Set the width of the Name column to 45vw */
    table.dataTable thead th.name-column,
    table.dataTable tbody td.name-column {
      width: 50%; /* 45% of the viewport width */
    }

    /* Set the width of the Date column to 22.5vw */
    table.dataTable thead th.date-column,
    table.dataTable tbody td.date-column {
      width: 25%; /* 22.5% of the viewport width */
    }

    /* Set the width of the Submitted column to 22.5vw */
    table.dataTable thead th.submitted-column,
    table.dataTable tbody td.submitted-column {
      width: 25%; /* 22.5% of the viewport width */
    }

  </style>
</head>
<body>
  <div class="pop-up">
    <div class="pop-up-item">
      <div class="w-layout-blockcontainer container-222 w-container"><img src="../images/Group-109.png" loading="lazy" alt="">
        <h1 class="heading-41">IMPORTANT</h1><img src="../images/Group-109.png" loading="lazy" alt="">
      </div>
      <div class="w-layout-blockcontainer container-223 w-container">
        <div class="w-layout-blockcontainer container-225 w-container">
          <h1 class="heading-42">Are you sure you want to <span class="text-span-8">completely</span> delete this project?</h1>
          <div class="text-block-53">This is some text inside of a div block.</div>
        </div>
      </div>
      <div class="w-layout-blockcontainer container-224 w-container">
        <div class="w-layout-blockcontainer container-226 w-container">
          <h1 data-w-id="019d5788-c289-4bf7-fede-ed7374e11499" class="heading-43">Back</h1>
        </div>
        <div class="w-layout-blockcontainer container-227 w-container">
          <h1 data-w-id="607d4c7f-c9c0-625b-c0a0-5361c4c1683a" class="heading-44">Delete</h1>
        </div>
      </div>
    </div>
  </div>
  <section class="section-31">
    <div class="w-layout-blockcontainer container-197 w-container">
      <div class="w-layout-blockcontainer container-198 w-container">
        <div class="text-block-45">
          <a href="home-recruiter.html#dashboard"><strong class="bold-text-10">BACK</strong></a>
        </div>
      </div>
      <div class="w-layout-blockcontainer container-199 w-container">
        <h1 class="heading-39" id="organization_name">Forest Service</h1>
      </div>
      <div class="w-layout-blockcontainer container-200 w-container">
        <div class="text-block-46"><strong data-w-id="1bd3fe0f-de08-ec5c-6ac2-82f36df9804d" class="bold-text-9">DELETE</strong></div>
      </div>
    </div>
    <div class="w-layout-blockcontainer container-201 w-container">
      <h1 class="heading-40">Information</h1>
      <div class="w-layout-blockcontainer container-202 w-container">
        <div class="w-layout-blockcontainer container-203 w-container">
          <div class="w-layout-blockcontainer container-213 w-container">
            <div class="text-block-47" id="position"><strong>Junior Ranger</strong></div>
            <div class="w-layout-blockcontainer container-205 w-container">
              <div class="w-layout-blockcontainer container-206 w-container">
                <div class="w-layout-blockcontainer container-215 w-container">
                  <div class="text-block-48">Position Type</div>
                </div>
                <div class="w-layout-blockcontainer container-212 w-container">
                  <div class="text-block-49" id="position_type">On Site</div>
                </div>
              </div>
              <div class="w-layout-blockcontainer container-206 w-container">
                <div class="w-layout-blockcontainer container-210 w-container">
                  <div class="text-block-50">Location</div>
                </div>
                <div class="w-layout-blockcontainer container-211 w-container">
                  <div><strong class="bold-text-11" id="location">Mariposa, CA</strong></div>
                </div>
              </div>
              <div class="w-layout-blockcontainer container-206 w-container">
                <div class="w-layout-blockcontainer container-210 w-container">
                  <div class="text-block-50">Salary</div>
                </div>
                <div class="w-layout-blockcontainer container-211 w-container">
                  <div><strong class="bold-text-11" id="salary">$2,000.00/Hr</strong></div>
                </div>
              </div>
              <div class="w-layout-blockcontainer container-206 w-container">
                <div class="w-layout-blockcontainer container-210 w-container">
                  <div class="text-block-50">Duration ofÂ Contract</div>
                </div>
                <div class="w-layout-blockcontainer container-211 w-container">
                  <div><strong class="bold-text-11" id="deadline">2024 - 2025</strong></div>
                </div>
              </div>
            </div>
          </div>
          <div class="w-layout-blockcontainer container-214 w-container">
            <div class="text-block-52"><strong class="bold-text-12">Requirements</strong></div>
            <p class="paragraph-15" id="requirements">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
            <div class="text-block-52"><strong>Responsibilities</strong></div>
            <p class="paragraph-15" id="responsibilities">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
          </div>
        </div>
        <div class="w-layout-blockcontainer container-204 w-container">
          <div class="w-layout-blockcontainer container-213 w-container">
            <a href="../recruiter/posting-jobs-form.html" class="button-13 w-button">Edit</a>
          </div>
          <div class="w-layout-blockcontainer container-218 w-container">
            <div class="text-block-52"><strong class="bold-text-12">About</strong></div>
            <p class="paragraph-15" id="about" >Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
            <div class="text-block-52"><strong class="bold-text-12">Nice To Have</strong></div>
            <p class="paragraph-15" id="nice-to-have">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
            <div class="text-block-52"><strong class="bold-text-12">Why work with us?</strong></div>
            <p class="paragraph-15" id="why-work-with-us">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="w-layout-blockcontainer container-219 w-container">
      <h1 class="heading-37">Participants</h1>
      <div class="datatable-controls">
        <label>
          Show
          <select id="entriesSelect">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
          entries
        </label>
        <label>
          Search: <input type="text" id="searchInput">
        </label>
      </div>
      <div class="w-layout-blockcontainer container-220 w-container">
        <table class="display" id="tableDateJoined">
          <thead>
          <tr>
            <th>Name</th>
            <th>Date</th> <!-- Updated heading -->
            <th>Action</th>
          </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
      <h1 class="heading-37">Applicants</h1>
      <div class="datatable-controls">
        <label>
          Show
          <select id="entriesSelect2">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
          entries
        </label>
        <label>
          Search: <input type="text" id="searchInput2">
        </label>
      </div>
      <div class="w-layout-blockcontainer container-221 w-container">
        <table class="display" id="tableSubmitted">
          <thead>
          <tr>
            <th>Name</th>
            <th>Date</th> <!-- Updated heading -->
            <th>Action</th>
          </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </section>
<!--  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=676715cb815e8f01731dca22" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>-->
<script>
  // Function to extract query parameters from the URL
function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
}

// Function to check if a session ID exists
function checkSession() {
    return $.ajax({
        url: 'http://localhost:3000/auth/api/user',
        method: 'GET',
        credentials: 'include', // Include cookies
        success: function (data) {
            if (!data.user || !data.user.id || data.user.role === "Student") {
                // Redirect to index.html if no session ID is found or the user is a student
                window.location.href = '../index.html';
            }
            userId = data.user.id; // Store the user ID
        },
        error: function (error) {
            // Redirect to index.html if there's an error (e.g., no session)
            window.location.href = '../index.html';
            console.error('Error fetching user ID:', error);
        },
    });
}

// Function to fetch data from the API
async function fetchJobDetails() {
    const jobId = getQueryParam('jobId'); // Get the job ID from the URL

    if (!jobId) {
        console.error('Job ID not found in the URL');
        return;
    }

    try {
        const response = await fetch(`http://localhost:3000/recruiter/posting-info/${jobId}`);
        if (!response.ok) {
            throw new Error('Failed to fetch job details');
        }
        const data = await response.json();
        console.log('API Response:', data);

        if (!data || data.length === 0) {
            throw new Error('No job data found');
        }

        const job = data[0];

        // Update the HTML with the fetched data
        document.getElementById('organization_name').textContent = job.organization_name || 'None.';
        document.getElementById('position').textContent = job.position_name || 'None.';
        document.getElementById('position_type').textContent = "something"; // Replace with actual data if available
        document.getElementById('location').textContent = job.location_requirements || 'None.';
        document.getElementById('salary').textContent = job.salary ? `$${job.salary}/Hr` : 'None';
        document.getElementById('deadline').textContent = job.deadline ? new Date(job.deadline).toLocaleDateString() : 'None.';
        document.getElementById('requirements').textContent = job.requirements || 'No requirements available.';
        document.getElementById('responsibilities').textContent = job.responsibilities || 'No responsibilities available.';
        document.getElementById('about').textContent = job.about || 'No about information available.';
        document.getElementById('nice-to-have').textContent = job.nice_to_have || 'No nice-to-have information available.';
        document.getElementById('why-work-with-us').textContent = job.why_work_with_us || 'No information available.';
    } catch (error) {
        console.error('Error fetching job details:', error);
        document.getElementById('error-message').textContent = 'Failed to fetch job details.';
    }
}

// Call the function when the page loads
document.addEventListener('DOMContentLoaded', function () {
    checkSession().then(fetchJobDetails).catch(() => {
        // Redirect to index.html if the session check fails
        window.location.href = '../index.html';
    });
});
  </script>

<script>
  $(document).ready(function () {
    let table;

    // Function to extract query parameters from the URL
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // Initialize the DataTable
    function initializeDataTable() {
        table = $('#tableDateJoined').DataTable({
            dom: 'rtip', // Remove default search bar and "Show entries" dropdown
            lengthMenu: [10, 25, 50, 100], // Set options for "Show entries"
        });
    }

    // Fetch data from the API and populate the table
    function fetchAndPopulateTable() {
        const jobId = getQueryParam('jobId'); // Get the job ID from the URL

        if (!jobId) {
            console.error('Job ID not found in the URL');
            return;
        }

        $.ajax({
            url: `http://localhost:3000/recruiter/accepted-job-applications/${jobId}`,
            method: 'GET',
            success: function (data) {
                if (!data || data.length === 0) {
                    console.error('No data found');
                    return;
                }

                const tableBody = $('#tableDateJoined tbody');
                table.clear(); // Clear the existing data

                data.forEach((job) => {
                    const row = `
                        <tr>
                            <td class="name-column">${job.username}</td>
                            <td class="date-column">${new Date(job.approved_date).toLocaleDateString()}</td>
                            <td>
                                <div class="vertical-buttons">
                                    <button class="edit-btn suspend">Suspend</button>
                                    <button class="edit-btn info" data-application-id="${job.application_id}">Info</button>
                                </div>
                            </td>
                        </tr>
                    `;
                    table.row.add($(row)).draw(false); // Add the row and redraw the table
                });
            },
            error: function (error) {
                console.error('Error fetching data:', error);
            },
        });
    }

    // Handle custom "Show entries" dropdown
    $('#entriesSelect').on('change', function () {
        table.page.len($(this).val()).draw();
    });

    // Handle custom search input
    $('#searchInput').on('keyup', function () {
        table.search(this.value).draw();
    });

    // Handle click event for the Suspend button
    $('#tableDateJoined').on('click', '.edit-btn.suspend', function () {
        // Get the application ID from the corresponding Info button in the same row
        const applicationId = $(this).closest('tr').find('.edit-btn.info').data('application-id');

        if (!applicationId) {
            console.error('Application ID not found');
            return;
        }

        // Make the API call to suspend the application
        $.ajax({
            url: `http://localhost:3000/recruiter/suspend-application/${applicationId}`,
            method: 'PUT',
            success: function (response) {
                console.log('Application suspended:', response.message);

                // Remove the row from the table immediately
                const row = $(this).closest('tr'); // Get the row that contains the "Suspend" button
                table.row(row).remove().draw(); // Remove the row and redraw the table

                // Optionally, refresh the table to ensure data consistency
                fetchAndPopulateTable();
            }.bind(this), // Bind `this` to the current context (the "Suspend" button)
            error: function (error) {
                console.error('Error suspending application:', error.responseJSON.error);
            },
        });
    });

    // Handle click event for the Info button
    $('#tableDateJoined').on('click', '.edit-btn.info', function () {
        const applicationId = $(this).data('application-id'); // Get the application ID from the button's data attribute
        window.location.href = `recruiter-viewstudentapplication.html?applicationId=${applicationId}`; // Redirect with the application ID
    });

    // Initial data fetch and table setup
    initializeDataTable();
    fetchAndPopulateTable();
  });
</script>
<script>
  $(document).ready(function () {
    let table;

    // Initialize the DataTable
    function initializeDataTable() {
      table = $('#tableSubmitted').DataTable({
        dom: 'rtip', // Remove default search bar and "Show entries" dropdown
        lengthMenu: [10, 25, 50, 100], // Set options for "Show entries"
      });
    }

    const jobId = getQueryParam('jobId'); // Get the job ID from the URL

    if (!jobId) {
      console.error('Job ID not found in the URL');
      return;
    }

    // Fetch data from the API and populate the table
    function fetchAndPopulateApplicantsTable() {
      $.ajax({
        url: `http://localhost:3000/recruiter/pending-job-applications/${jobId}`, // Replace with your actual API URL
        method: 'GET',
        success: function (data) {
          const table = $('#tableSubmitted').DataTable();
          table.clear(); // Clear the existing data

          data.forEach((job) => {
            console.log('Job Application:', job); // Debugging: Log the job application data

            const row = `
              <tr>
                <td class="name-column">${job.username}</td>
                <td class="date-column">${new Date(job.apply_date).toLocaleDateString()}</td>
                <td>
                  <div class="vertical-buttons">
                    <button class="edit-btn accept">Accept</button>
                    <button class="edit-btn info" data-application-id="${job.application_id}">Info</button>
                  </div>
                </td>
              </tr>
            `;
            table.row.add($(row)).draw(false); // Add the row and redraw the table
          });
        },
        error: function (error) {
          console.error('Error fetching data:', error);
        },
      });
    }

    // Handle custom "Show entries" dropdown
    $('#entriesSelect2').on('change', function () {
      table.page.len($(this).val()).draw();
    });

    // Handle custom search input
    $('#searchInput2').on('keyup', function () {
      table.search(this.value).draw();
    });

    // Add click event for the "Accept" button
    $('#tableSubmitted').on('click', '.edit-btn.accept', function () {
      // Get the application ID from the corresponding Info button in the same row
      const applicationId = $(this).closest('tr').find('.edit-btn.info').data('application-id');

      if (!applicationId) {
        console.error('Application ID not found');
        return;
      }

      // Make the API call to accept the application
      $.ajax({
        url: `http://localhost:3000/recruiter/accept-application/${applicationId}`,
        method: 'PUT',
        success: function (response) {
          console.log('Application accepted:', response.message);

          // Remove the row from the table immediately
          const row = $(this).closest('tr'); // Get the row that contains the "Accept" button
          table.row(row).remove().draw(); // Remove the row and redraw the table

          // Optionally, refresh the table to ensure data consistency
          fetchAndPopulateApplicantsTable();
        }.bind(this), // Bind `this` to the current context (the "Accept" button)
        error: function (error) {
          console.error('Error accepting application:', error.responseJSON.error);
        },
      });
    });

    

    // Add click event for the "Info" button
    $('#tableSubmitted').on('click', '.edit-btn.info', function () {
      const applicationId = $(this).data('application-id');
      window.location.href = `recruiter-viewstudentapplication.html?applicationId=${applicationId}`; // Redirect with the application ID
    });

    // Initial data fetch and table setup
    initializeDataTable();
    fetchAndPopulateApplicantsTable();
  });
</script>
  <script src="../js/webflow.js" type="text/javascript"></script>
</body>
</html>